# Feature Plan: AI-Generated Articles Section

## Overview
This feature introduces an Articles section to the greater.than.today website, focused on relevant coaching topics (burnout, productivity, stress management, personal crisis, etc). Articles can be auto-generated by AI or manually authored, reviewed in Nova, and published upon approval.

---

## Articles Index UI Modernization (2025-04-18)

### What Has Been Done
- **Palette:** Updated `/articles` to use the exact color palette from the tech-leads page. Main yellow is now `#FFC524`, with white for cards and content, and blue/orange/green available for accents.
- **Layout:** Modernized the articles index page with a hero, grid layout, and sidebar. All layout and styling is now inspired solely by the tech-leads page.
- **Custom CSS:** Extracted shared and articles-specific CSS into `public/css/articles-custom.css`.
- **Seeder/Test:** Added a new article to the seeder and created a test for it (TDD).
- **TDD:** All changes are covered by feature tests.
- **CI/CD:** All changes are compatible with automated deployment.

### What Needs To Be Fixed Next
- **Hyperlink Color:** Blue hyperlinks do not fit the palette; update to a palette-appropriate color (likely black or orange).
- **Rounded Corners:** Card and sidebar rounding need to match tech-leads (may need less/more rounding or shadow tweaks).
- **Remove 'Feeling stuck' Section:** The sidebar's "Feeling stuck?" section is now considered unnecessary; remove it for a cleaner design.
- **Polish:** General visual polishâ€”spacing, font sizes, button styles, and hover effects to better match tech-leads.
- **Accessibility:** Review for color contrast and keyboard navigation.

### Design Notes
- **Reference Only Tech-Leads:** All design decisions must use the tech-leads page as the sole reference. Legacy/post page styles are deprecated.
- **TDD Required:** Tests must be written/updated before UI or logic changes.
- **Palette Reference:**
  - Yellow: `#FFC524`
  - Blue: `#82E6E6`
  - Orange: `#FF8E4F`
  - Green: `#63D9A0`
  - Black: `#000`
  - White: `#fff`

### Blockers
- None. All tests pass and the environment is stable.

### How To Resume Next Session
1. Fix hyperlink color on the articles index page.
2. Adjust card/sidebar rounding to match tech-leads.
3. Remove the "Feeling stuck?" sidebar section.
4. Polish spacing, typography, and button styles.
5. Re-run all tests to confirm.
6. Update this doc and seeder/tests as needed.

---

## AI-Generated Articles: Remaining Steps
- [ ] Write/extend model tests for status, source, ai_prompt logic (TDD-first)
- [ ] Update Post model for new fields and workflows
- [ ] Implement Nova actions (approve/reject)
- [ ] Complete/polish `/articles` controller & navigation
- [ ] Add further AI metadata fields if needed
- [ ] Polish Articles UI and Nova UX as needed
- [ ] Update documentation as implementation progresses

---

## Local Development: Resetting & Seeding the Database

To clear your database and seed it with sample posts:

```bash
php artisan migrate:fresh --seed
```

This will:
- Drop all tables and re-run all migrations
- Truncate the posts table and insert example posts (manual & AI, published & draft)

---

## Goals (Unchanged)
- Provide high-quality, relevant, and regularly updated coaching articles.
- Automate article generation using AI (scheduled and on-demand).
- Ensure all articles are reviewed and approved before publication.
- Empower admin (coach) to manage, edit, and trigger article creation via Nova.

---

_This document is the living plan for the AI-Generated Articles feature and articles index modernization. Update as needed during development._

- Migration drafted to add `status`, `source`, and `ai_prompt` fields to the `posts` table. These fields support the editorial workflow and AI article provenance for the unified Post model.
- Nova Post resource updated: status, source, and ai_prompt fields are now visible/editable; filters for status and source have been implemented for workflow management.
- Public-facing Articles section implementation started: `/articles` route and `articles.blade.php` view created to list all published posts. Navigation will be updated to link to this section.
- Database seeding prepared: running `php artisan migrate:fresh --seed` will clear and repopulate the posts table with sample articles for development/testing.
- Debug output and logging added for troubleshooting test failures.
- Debug log statement in `/articles` route was removed after successful test verification.

## Next Steps
1. Manually verify the articles implementation on the front end to ensure correct rendering and user experience.
2. Write/extend model tests for status, source, and ai_prompt logic (TDD-first).
3. Update the Post model to support the new fields and business logic.
4. Implement Nova workflow actions (approve/reject) for editorial review.
5. Complete the `/articles` route/controller logic and connect it to navigation.
6. (Optional) Add fields for further AI metadata if needed.
7. Polish Articles UI and Nova UX as needed.
8. Update documentation and feature plan as implementation progresses.
9. Use the new seeding setup to quickly reset and populate the database with example posts for local testing.
4. Complete the `/articles` route/controller logic and connect it to navigation.
5. (Optional) Add fields for further AI metadata if needed.
6. Polish Articles UI and Nova UX as needed.
7. Update documentation and feature plan as implementation progresses.
8. Use the new seeding setup to quickly reset and populate the database with example posts for local testing.

---

**Current Status:**
- Model, migration, Nova resource fields, and filters are in place.
- Articles index view is scaffolded.
- Database seeding is ready for local development.

**Next priorities:**
- TDD: Write/extend model tests
- Editorial workflow: Nova actions (approve/reject)
- Complete and polish articles section for public users

---

## Local Development: Resetting & Seeding the Database

To clear your database and seed it with sample posts:

```bash
php artisan migrate:fresh --seed
```

This will:
- Drop all tables and re-run all migrations
- Truncate the posts table and insert example posts (manual & AI, published & draft)

Use this workflow to demo, test, or develop the Articles section with real data.


> **Note:** Detailed documentation for the Post model fields (including status, source, and ai_prompt) can now be found in [docs/API.md](docs/API.md).

## Goals
- Provide high-quality, relevant, and regularly updated coaching articles.
- Automate article generation using AI (scheduled and on-demand).
- Ensure all articles are reviewed and approved before publication.
- Empower admin (coach) to manage, edit, and trigger article creation via Nova.

## User Stories
1. **As a visitor**, I can browse and read coaching articles on the website.
2. **As an admin**, I can review, edit, approve, or reject AI-generated article drafts in Nova.
3. **As an admin**, I can trigger AI to generate a new article on a chosen topic or prompt.
4. **As an admin**, I am notified when new article drafts are proposed.
5. **As an admin**, I can see an audit trail of article review and publishing actions (optional).

## Functional Requirements
- Article model with status (proposed, draft, published, rejected), title, content, topic, author, timestamps.
- Nova resource for Article with review and publishing workflow.
- Public-facing articles section (list, view, search).
- AI integration for scheduled and manual article generation.
- Scheduled task to propose a new article weekly.
- Admin notification of new article proposals.
- Audit trail for article actions (optional).

## Non-Functional Requirements
- TDD: All features covered by automated tests.
- Secure admin access (Nova policies).
- Robust error handling and logging for AI integration.
- Documentation updated as feature evolves.


## TDD & CI/CD Notes
- Write model, feature, and integration tests for each milestone.
- Mock AI service in tests.
- Use Dusk for browser-based admin workflow tests.
- Ensure CI/CD pipeline covers all new tests.

## Open Questions
- Which AI provider/service to use for article generation?
- Should articles be tagged/categorized for easier browsing?
- Should rejected articles be archived or deleted?

---

_This document is the living plan for the AI-Generated Articles feature. Update as needed during development._
