# Feature Plan: AI-Generated Articles Section

## Overview
This feature introduces an Articles section to the greater.than.today website, focused on relevant coaching topics (burnout, productivity, stress management, personal crisis, etc). Articles can be auto-generated by AI or manually authored, reviewed in Nova, and published upon approval.

---

## Articles Index UI Modernization (2025-04-18)

### What Has Been Done
- Articles index UI modernized and palette-matched to tech-leads.
- Custom CSS extracted for articles.
- Seeder and feature tests added for new article (TDD-first).
- Navigation: “Articles” link added to tech-leads page for discoverability.
- TDD and CI/CD practices in place and verified.
- Model, migration, Nova resource fields, and filters implemented.
- Database seeding ready for local development.

---

### What Needs To Be Done Next

#### UI/UX Improvements
- [x] Remove the “Feeling stuck?” sidebar section from articles index.
- [x] Change “Insight & Articles” heading to use the same color and styles as the H1 on the tech-leads page.
- [x] Make the header of each article listing black (not blue), even though they are hyperlinks.
- [x] Change the “Read more” links to black (currently a weird green).
- [x] Remove all rounded corners from cards and sidebar elements.
- [ ] Bring in the navigation bar from the tech-leads page for consistency.
- [ ] Polish spacing, typography, and button styles for consistency.
- [ ] Verify all changes visually and via browser tests.

_Note: As of 2025-04-20, the above items have been implemented and visually verified except for navigation and spacing/button polish. See commit history for details._

#### Editorial Workflow & Backend
- [ ] Write/extend model tests for status, source, and ai_prompt logic (TDD-first).
- [ ] Update the Post model and migration for any new fields/workflows.
- [ ] Implement Nova actions for approving/rejecting articles.
- [ ] Complete/polish `/articles` controller and navigation logic.
- [ ] Add further AI metadata fields if needed.

#### Testing & Validation
- [ ] Run all automated tests (unit, feature, Dusk) to ensure coverage.
- [ ] Manually verify navigation (including new Articles link on tech-leads page).
- [ ] Use seeding setup to demo/test with real data.

#### Documentation
- [ ] Update this document and any related docs (API, Nova, etc.) as changes are made.
- [ ] Document any new endpoints, fields, or workflows.

---

### Current Status
- Navigation to articles index is now available from the tech-leads page.
- Editorial and publishing workflows are partially implemented.
- UI/UX improvements and backend TDD remain the main priorities.

---

### Next Immediate Step
**Write or update automated tests for the next UI or model change you plan to make, before implementing the change itself.**

---

#### How To Resume Next Session
1. Review this checklist and pick the next actionable item.
2. Start with a test (TDD) for the next UI or backend change.
3. Implement the change and verify all tests pass.
4. Update this doc and related documentation as you go.

_This document is the living plan for the AI-Generated Articles feature. Update as needed during development._

---

## AI-Generated Articles: Remaining Steps
- [ ] Write/extend model tests for status, source, ai_prompt logic (TDD-first)
- [ ] Update Post model for new fields and workflows
- [ ] Implement Nova actions (approve/reject)
- [ ] Complete/polish `/articles` controller & navigation
- [ ] Add further AI metadata fields if needed
- [ ] Polish Articles UI and Nova UX as needed
- [ ] Update documentation as implementation progresses

---

## Local Development: Resetting & Seeding the Database

To clear your database and seed it with sample posts:

```bash
php artisan migrate:fresh --seed
```

This will:
- Drop all tables and re-run all migrations
- Truncate the posts table and insert example posts (manual & AI, published & draft)

---

## Goals (Unchanged)
- Provide high-quality, relevant, and regularly updated coaching articles.
- Automate article generation using AI (scheduled and on-demand).
- Ensure all articles are reviewed and approved before publication.
- Empower admin (coach) to manage, edit, and trigger article creation via Nova.

---

_This document is the living plan for the AI-Generated Articles feature and articles index modernization. Update as needed during development._

- Migration drafted to add `status`, `source`, and `ai_prompt` fields to the `posts` table. These fields support the editorial workflow and AI article provenance for the unified Post model.
- Nova Post resource updated: status, source, and ai_prompt fields are now visible/editable; filters for status and source have been implemented for workflow management.
- Public-facing Articles section implementation started: `/articles` route and `articles.blade.php` view created to list all published posts. Navigation will be updated to link to this section.
- Database seeding prepared: running `php artisan migrate:fresh --seed` will clear and repopulate the posts table with sample articles for development/testing.
- Debug output and logging added for troubleshooting test failures.
- Debug log statement in `/articles` route was removed after successful test verification.

## Next Steps
1. Manually verify the articles implementation on the front end to ensure correct rendering and user experience.
2. Write/extend model tests for status, source, and ai_prompt logic (TDD-first).
3. Update the Post model to support the new fields and business logic.
4. Implement Nova workflow actions (approve/reject) for editorial review.
5. Complete the `/articles` route/controller logic and connect it to navigation.
6. (Optional) Add fields for further AI metadata if needed.
7. Polish Articles UI and Nova UX as needed.
8. Update documentation and feature plan as implementation progresses.
9. Use the new seeding setup to quickly reset and populate the database with example posts for local testing.
4. Complete the `/articles` route/controller logic and connect it to navigation.
5. (Optional) Add fields for further AI metadata if needed.
6. Polish Articles UI and Nova UX as needed.
7. Update documentation and feature plan as implementation progresses.
8. Use the new seeding setup to quickly reset and populate the database with example posts for local testing.

---

**Current Status:**
- Model, migration, Nova resource fields, and filters are in place.
- Articles index view is scaffolded.
- Database seeding is ready for local development.

**Next priorities:**
- TDD: Write/extend model tests
- Editorial workflow: Nova actions (approve/reject)
- Complete and polish articles section for public users

---

## Local Development: Resetting & Seeding the Database

To clear your database and seed it with sample posts:

```bash
php artisan migrate:fresh --seed
```

This will:
- Drop all tables and re-run all migrations
- Truncate the posts table and insert example posts (manual & AI, published & draft)

Use this workflow to demo, test, or develop the Articles section with real data.


> **Note:** Detailed documentation for the Post model fields (including status, source, and ai_prompt) can now be found in [docs/API.md](docs/API.md).

## Goals
- Provide high-quality, relevant, and regularly updated coaching articles.
- Automate article generation using AI (scheduled and on-demand).
- Ensure all articles are reviewed and approved before publication.
- Empower admin (coach) to manage, edit, and trigger article creation via Nova.

## User Stories
1. **As a visitor**, I can browse and read coaching articles on the website.
2. **As an admin**, I can review, edit, approve, or reject AI-generated article drafts in Nova.
3. **As an admin**, I can trigger AI to generate a new article on a chosen topic or prompt.
4. **As an admin**, I am notified when new article drafts are proposed.
5. **As an admin**, I can see an audit trail of article review and publishing actions (optional).

## Functional Requirements
- Article model with status (proposed, draft, published, rejected), title, content, topic, author, timestamps.
- Nova resource for Article with review and publishing workflow.
- Public-facing articles section (list, view, search).
- AI integration for scheduled and manual article generation.
- Scheduled task to propose a new article weekly.
- Admin notification of new article proposals.
- Audit trail for article actions (optional).

## Non-Functional Requirements
- TDD: All features covered by automated tests.
- Secure admin access (Nova policies).
- Robust error handling and logging for AI integration.
- Documentation updated as feature evolves.


## TDD & CI/CD Notes
- Write model, feature, and integration tests for each milestone.
- Mock AI service in tests.
- Use Dusk for browser-based admin workflow tests.
- Ensure CI/CD pipeline covers all new tests.

## Open Questions
- Which AI provider/service to use for article generation?
- Should articles be tagged/categorized for easier browsing?
- Should rejected articles be archived or deleted?

---

_This document is the living plan for the AI-Generated Articles feature. Update as needed during development._
